{% extends "base.html" %}

{% block title %}運行情報システム - 事象一覧{% endblock %}

{% block content %}

<div class="flex flex-col items-center gap-4">

  {% for item in event_list %}

  <details class="w-full max-w-2xl bg-base-200 border rounded-lg p-4 shadow">
    <summary class="cursor-pointer text-lg font-bold">
      {{ item.event.reason.name }} - {{ item.event.detail }}
      <a href="{{ url_for('delay.new_delay_info', eid=item.event.eid) }}" class="btn btn-sm btn-primary">
    遅延情報を登録
</a>

    </summary>

    <div class="mt-3">

      {% if item.delays %}
      <h4 class="font-semibold mt-2">遅延：</h4>
      <ul class="list-disc ml-6">
        {% for d in item.delays %}
        <li>{{ d.train.name }}：{{ d.delay_minutes }}分遅延</li>
        {% endfor %}
      </ul>
      {% endif %}

      {% if item.cancels %}
      <h4 class="font-semibold mt-2">運休：</h4>
      <ul class="list-disc ml-6">
        {% for d in item.cancels %}
        <li>{{ d.train.name }}：運休</li>
        {% endfor %}
      </ul>
      {% endif %}

      {% if item.changes %}
      <h4 class="font-semibold mt-2">経路変更：</h4>
      <ul class="list-disc ml-6">
        {% for d in item.changes %}
        <li>{{ d.train.name }}：経路変更</li>
        {% endfor %}
      </ul>
      {% endif %}

    </div>
  </details>

  {% endfor %}

</div>

{% endblock %}
