# 遅延情報アプリ 仕様書

## 1. アプリ概要
- アプリ名：遅延情報共有アプリ
- 目的：
  - 遅延情報の迅速な社内伝達
  - 駅頭掲示の自動化（デジタルサイネージ活用）

---

## 2. 機能一覧

### 2.1 遅延情報の登録
- 遅延イベント登録（遅延情報はイベントに紐づく）
  - 遅延時間（delay_minutes）
  - 遅延理由（reason）
  - 対象列車 (tid)
  - 運休 (is_cancel)
  - 運転経路変更 (is_change)
- 遅延日時 (date)

### 2.2 遅延情報の一覧表示
- 表示はその日の分のみ発車時刻順に表示
- 遅延イベントごとに対象列車を表示
- 各駅ごとにページを分けて表示し、モニタに中継して掲示する
- 遅延理由と詳細を遅延イベントごとに表示する
- 運転休止列車の表示

### 2.3 遅延情報の編集・削除
- 遅延イベントの一覧から対象列車登録へ遷移
- 個別編集
- 削除確認ダイアログ

### 2.4 集計機能（任意）
- 日別・週別・月別の遅延時間
- グラフ表示（将来的に）

### 2.5 管理機能（任意）
- 初期データ投入（seed）
- 管理用エンドポイント

---

## 3. 画面一覧

### 3.1 遅延一覧ページ
- 遅延カード表示（遅延イベント）
  - 列車名
  - 遅れ時分
  - イベント詳細（案内文章）を一行...で文頭だけ表示
  - 列車追加ボタン、削除ボタン、編集ボタン

### 3.2 駅別駅頭掲示ページ
- 遅延イベント
  - イベント詳細
  - 列車ごとの情報

### 3.3 遅延登録ページ
- フォーム入力
- バリデーション

### 3.4 遅延編集ページ
- 既存データの編集

### 3.5 管理ページ（任意）

### 3.6 列車別到着見込みページ
- 遅延を反映した時刻表を列車個別に表示
---

## 4. データモデル（ER 図）

### DelayInfo
DelayInfoER.mdを参照

---

## 5. API / ルーティング設計

### GET /delay
- 遅延一覧

### POST /delay/add
- 遅延登録

### GET /delay/view/<sid>
- 駅別駅頭掲示

### GET /delay/<tid>
- 遅延詳細（任意）

### POST /delay/<tid>/update
- 遅延編集

### POST /delay/<tid>/delete
- 遅延削除

---

## 6. 使用技術
- Python / Flask
- SQLAlchemy
- PostgreSQL
- Tailwind CSS + daisyUI
- Render（デプロイ）
- GitHub（CI/CD）

---

## 7. 今後の拡張案
- 遅延理由のタグ化+集計機能
- PowerApps 連携
- API 公開
- グラフ表示

---


## 8. メモ / 決定事項
- 仕様変更の履歴
  - 1/18 ER,仕様書一部修正（データモデル、ルーティング）
- 技術的なメモ
- 今後の課題
